<ion-card>
  <ion-card-header>
    <ion-card-title>Perfiles del Proyecto</ion-card-title>
  </ion-card-header>

  <ion-card-content>

    <!-- FORMULARIO DE NUEVO PERFIL -->
    <form [formGroup]="perfilForm" (ngSubmit)="agregarPerfil()">

      <ion-item>
        <ion-label position="stacked">Nombre del perfil</ion-label>
        <ion-input formControlName="nombre" required></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="stacked">Tarifa por hora (€)</ion-label>
        <ion-input type="number" formControlName="tarifa" min="0" required></ion-input>
      </ion-item>

      <ion-item>
        <ion-label>¿Hace horas extra?</ion-label>
        <ion-toggle formControlName="horasExtra"></ion-toggle>
      </ion-item>

      <ion-item *ngIf="perfilForm.get('horasExtra')?.value">
        <ion-label position="stacked">Tarifa hora extra (€)</ion-label>
        <ion-input type="number" formControlName="tarifaExtra" min="0"></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="stacked">Disponibilidad (%)</ion-label>
        <ion-input type="number" formControlName="disponibilidad" min="10" max="100"></ion-input>
      </ion-item>

      <ion-button expand="block" type="submit" [disabled]="perfilForm.invalid">
        Añadir Perfil
      </ion-button>

    </form>

    <!-- LISTA DE PERFILES AÑADIDOS -->
    <ion-list *ngIf="perfiles.length">
      <ion-item *ngFor="let perfil of perfiles; let i = index">
        <ion-label>
          <h2>{{ perfil.nombre }}</h2>
          <p>Tarifa: €{{ perfil.tarifa }} / h</p>
          <p *ngIf="perfil.horasExtra">Extra: €{{ perfil.tarifaExtra }} / h</p>
          <p>Disponibilidad: {{ perfil.disponibilidad }}%</p>
        </ion-label>
        <ion-button fill="clear" slot="end" color="danger" (click)="eliminarPerfil(i)">
          <ion-icon name="trash-outline" slot="icon-only"></ion-icon>
        </ion-button>
      </ion-item>
    </ion-list>

  </ion-card-content>
</ion-card>
